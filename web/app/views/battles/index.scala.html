@import collection.immutable.Seq
@import se.ramn.models.BattleReportView
@import se.ramn.models.ScoreRecord

@(battleReports: Seq[BattleReportView])

@main("Battles") {
  <h2>Initiate new battle</h2>
  @helper.form(action = routes.Battles.create) {
    <p>Run a battle between two randomly chosen bots</p>
    <p>
      <input type="submit" value="Execute battle" />
    </p>
  }


  <h2>Latest battles</h2>
  <ul>
    @for(report <- battleReports) {
      <li>
        <p>
          Battle created at: @report.createdAt
        </p>
        <table cellpadding="1" cellspacing="1" border="1">
          <tr>
            <th>TeamLeaderName</th>
            <th>Score</th>
            <th>Rank</th>
            <th>BulletDamage</th>
            <th>BulletDamageBonus</th>
            <th>LastSurvivorBonus</th>
            <th>RamDamage</th>
            <th>RamDamageBonus</th>
            <th>Survival</th>
            <th>Firsts</th>
            <th>Seconds</th>
            <th>Thirds</th>
          </tr>
          @for(ScoreRecord(bot, result) <- report.scoreRecordsByScore) {
            <tr>
              <td>
                <a href="@routes.Bots.show(bot.id.toString)">
                  @result.getTeamLeaderName
                </a>
              </td>
              <td>@result.getScore</td>
              <td>@result.getRank</td>
              <td>@result.getBulletDamage</td>
              <td>@result.getBulletDamageBonus</td>
              <td>@result.getLastSurvivorBonus</td>
              <td>@result.getRamDamage</td>
              <td>@result.getRamDamageBonus</td>
              <td>@result.getSurvival</td>
              <td>@result.getFirsts</td>
              <td>@result.getSeconds</td>
              <td>@result.getThirds</td>
            </tr>
          }
        </table>
      </li>
    }
  </ul>
}
